{% extends 'layout-side-nav.html' %}

{% import 'macros/time.html' as time %}
{% import 'macros/category-icon.html' as category_icon %}
{% import 'atoms/partially-styled-link.html' as partially_styled_link with context %}
{% import 'molecules/pagination.html' as pagination with context %}
{% import 'ask/search-bar.html' as search_bar with context %}


{% block content_modifiers -%}
    {{ super() }} content__hide-horizontal-overflow
{%- endblock %}

{% block content_main_modifiers -%}
    {{ super() }} content__flush-bottom category-page
{%- endblock %}

{% block content_main %}
    <section class="block
                    block__flush-top
                    block__sub">
        <h1>
          {{ category_icon.render(page.ask_category.name, '', 'round') }}
          {{ page.ask_category.name }}
        </h1>

        <div class="lead-paragraph">
            <p>{{ page.ask_category.intro|safe }}</p>
        </div>

    </section>

    <section class="search-results block
                    block__flush-top">
        <div class="message">
        </div>
        
        <div class="question_list">
            {% for question in questions %}
            <article class="question_summary question_summary__basic">
                {{ partially_styled_link.render( {'plain_text': question.question, 'underlined_text': 'Read answer', 'url': slugurl( question.slug )} ) }}  
            </article>
            {% endfor %}
        </div>
  
        <div class="block block__sub">
            {{ pagination.render( paginator.num_pages, current_page, '', index, 'Previous', 'Next' ) }}
        </div>  
    </section>
    {{ search_bar.render( 'right' ) }}
{% endblock %}

{% block javascript %}
{{ super() }}
<script>
    var audienceMap = {{ page.ask_category.audience_json|safe }};
    var subcatMap = {{ page.ask_category.subcategory_json|safe }};
    var answerMap = {{ page.ask_category.answer_json|safe }};
</script>    
{% endblock %}


